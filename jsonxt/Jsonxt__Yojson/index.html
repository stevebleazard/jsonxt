<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Jsonxt__Yojson (jsonxt.Jsonxt__Yojson)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">jsonxt</a> &#x00BB; Jsonxt__Yojson</nav><h1>Module <code>Jsonxt__Yojson</code></h1><p>Yojson compatibility module</p><p>To use Jsonxt's Yojson compatibility module create a <code>yojson.ml</code> file in the projects source directory with the following contents:</p><pre><code class="ml">include Jsonxt.Yojson</code></pre><p>Note that compatibility is mostly a thin layer on top of Jsonxt. In particular the error reporting by the utils module uses the <code>Failure</code> exception rather than Yojson's specialist exceptions</p><h3 id="json-compatibility-differences"><a href="#json-compatibility-differences" class="anchor"></a>JSON compatibility differences</h3><p>The underlying parser used by the Yojson compatibility modules are RFC 8259 compliant except for specific extensions. In particular:</p><ul><li>Control characters must be escaped as defined by RFC 8259</li><li>Comment are supported with /* */ and // at the end of the line</li><li>Variants and tuples are supported but with syntax changes noted later</li><li>Object keys must be quoted. So {ab:10} is not valid and must be encoded as {&quot;ab&quot;:10}</li><li>Variant names must be quoted. eg. &lt;&quot;ab&quot;&gt; and &lt;&quot;ab&quot;:10&gt;</li></ul><h3 id="behavioural-differences"><a href="#behavioural-differences" class="anchor"></a>Behavioural differences</h3><ul><li>The <code>lexer_state</code> data structure is used to report errors but not updated during the parsing of the input</li><li>The optional <code>buf</code> parameter is ignored</li><li>Error messages are likely to be different</li><li>The utils module module uses the <code>Failure</code> exception rather than Yojson's specialist exceptions</li></ul></header><dl><dt class="spec exception" id="exception-Json_error"><a href="#exception-Json_error" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Json_error</span> <span class="keyword">of</span> string</code></dt></dl><dl><dt class="spec type" id="type-lexer_state"><a href="#type-lexer_state" class="anchor"></a><code><span class="keyword">type</span> lexer_state</code><code> = </code><code>{</code><table class="record"><tr id="type-lexer_state.buf" class="anchored"><td class="def field"><a href="#type-lexer_state.buf" class="anchor"></a><code>buf : Stdlib.Buffer.t;</code></td></tr><tr id="type-lexer_state.lnum" class="anchored"><td class="def field"><a href="#type-lexer_state.lnum" class="anchor"></a><code><span class="keyword">mutable</span> lnum : int;</code></td></tr><tr id="type-lexer_state.bol" class="anchored"><td class="def field"><a href="#type-lexer_state.bol" class="anchor"></a><code><span class="keyword">mutable</span> bol : int;</code></td></tr><tr id="type-lexer_state.fname" class="anchored"><td class="def field"><a href="#type-lexer_state.fname" class="anchor"></a><code><span class="keyword">mutable</span> fname : <span>string option</span>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-init_lexer"><a href="#val-init_lexer" class="anchor"></a><code><span class="keyword">val</span> init_lexer : <span>?&#8288;buf:Stdlib.Buffer.t</span> <span>&#45;&gt;</span> <span>?&#8288;fname:string</span> <span>&#45;&gt;</span> <span>?&#8288;lnum:int</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-lexer_state">lexer_state</a></code></dt></dl><div class="spec module" id="module-Basic"><a href="#module-Basic" class="anchor"></a><code><span class="keyword">module</span> <a href="Basic/index.html">Basic</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Safe"><a href="#module-Safe" class="anchor"></a><code><span class="keyword">module</span> <a href="Safe/index.html">Safe</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Raw"><a href="#module-Raw" class="anchor"></a><code><span class="keyword">module</span> <a href="Raw/index.html">Raw</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>